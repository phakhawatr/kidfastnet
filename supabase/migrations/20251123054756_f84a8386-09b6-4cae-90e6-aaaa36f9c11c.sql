-- Insert NT Grade 3 Year 2565 Questions
DO $$
DECLARE
  v_admin_id uuid;
BEGIN
  -- Get the first admin ID
  SELECT id INTO v_admin_id FROM admins LIMIT 1;
  
  IF v_admin_id IS NULL THEN
    RAISE EXCEPTION 'No admin found in the system';
  END IF;

  -- Insert 30 NT questions for Grade 3 Year 2565
  INSERT INTO question_bank (
    admin_id, is_system_question, tags, grade, semester, assessment_type,
    difficulty, skill_name, topic, subject,
    question_text, choices, correct_answer, explanation
  ) VALUES
  
  -- Question 1
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'comparing', 'การเปรียบเทียบและเรียงลำดับจำนวน', 'math',
   'แก้วสำรวจราคาเครื่องใช้ไฟฟ้า 4 ชนิด: โทรทัศน์ 15,900 บาท, คอมพิวเตอร์ 14,900 บาท, เครื่องปรับอากาศ 13,500 บาท, ตู้เย็น 18,990 บาท ถ้าเรียงลำดับราคาจากมากไปน้อย เครื่องใช้ไฟฟ้าในลำดับที่ 3 กับลำดับที่ 4 มีราคาต่างกันกี่บาท?',
   '["1,400 บาท", "3,090 บาท", "13,500 บาท", "18,990 บาท"]'::jsonb,
   '1,400 บาท',
   'เรียงลำดับจากมากไปน้อย: ตู้เย็น (18,990), โทรทัศน์ (15,900), คอมพิวเตอร์ (14,900), เครื่องปรับอากาศ (13,500) ลำดับที่ 3 - ลำดับที่ 4 = 14,900 - 13,500 = 1,400 บาท'),
  
  -- Question 2
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'fractions', 'การเปรียบเทียบเศษส่วน', 'math',
   'พิซซ่าเหลืออยู่ 4 ถาด: ไส้กรอกเหลือ 1/7 ถาด, กุ้งเหลือ 1/10 ถาด, ปูอัดเหลือ 1/5 ถาด, แฮมเหลือ 1/9 ถาด พิซซ่าหน้าใดเหลือน้อยที่สุด?',
   '["ไส้กรอก", "กุ้ง", "ปูอัด", "แฮม"]'::jsonb,
   'กุ้ง',
   'เศษส่วนที่มีตัวเศษเท่ากัน ตัวส่วนมากกว่าจะมีค่าน้อยกว่า เรียงตัวส่วน: 10 > 9 > 7 > 5 ดังนั้น 1/10 (กุ้ง) น้อยที่สุด'),
  
  -- Question 3
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'fractions', 'การเปรียบเทียบเศษส่วน', 'math',
   'เพื่อน 4 คนได้รับน้ำส้ม: เค้ก 1/5 ขวด, บอล 1/9 ขวด, ต้า 1/8 ขวด, แนน 1/6 ขวด เรียงลำดับคนที่ได้น้ำส้มจากน้อยไปมาก ได้ตามข้อใด?',
   '["บอล, แนน, ต้า, เค้ก", "บอล, ต้า, แนน, เค้ก", "เค้ก, แนน, บอล, ต้า", "เค้ก, แนน, ต้า, บอล"]'::jsonb,
   'บอล, ต้า, แนน, เค้ก',
   'เรียงตัวส่วนจากมากไปน้อย (เพื่อให้ได้ค่าจากน้อยไปมาก): 9 > 8 > 6 > 5 ดังนั้น บอล (1/9) < ต้า (1/8) < แนน (1/6) < เค้ก (1/5)'),
  
  -- Question 4
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'mixedOperations', 'การบวก ลบ คูณ หารระคน', 'math',
   'ลุงโตเก็บพุทรา: มกราคม 2,050 กก., กุมภาพันธ์ 1,850 กก. ขายราคากิโลกรัมละ 9 บาท รวมทั้งสองเดือนขายได้เงินกี่บาท?',
   '["16,650 บาท", "18,450 บาท", "27,100 บาท", "35,100 บาท"]'::jsonb,
   '35,100 บาท',
   'รวมน้ำหนัก: 2,050 + 1,850 = 3,900 กก. คำนวณเงิน: 3,900 × 9 = 35,100 บาท'),
  
  -- Question 5
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'mixedOperations', 'การบวก ลบ คูณ หารระคน', 'math',
   'ไข่เค็ม 90 ฟอง จัดใส่กล่อง กล่องละ 6 ฟอง ขายกล่องละ 50 บาท จะได้เงินทั้งหมดกี่บาท?',
   '["146 บาท", "240 บาท", "300 บาท", "750 บาท"]'::jsonb,
   '750 บาท',
   'จำนวนกล่อง: 90 ÷ 6 = 15 กล่อง จำนวนเงิน: 15 × 50 = 750 บาท'),
  
  -- Question 6
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'mixedOperations', 'การบวก ลบ คูณ หารระคน', 'math',
   'ต้อมมีแสตมป์ 112 ดวง ได้รับอีก 37 ดวง ให้แสตมป์น้องชาย 25 ดวง ต้อมเหลือแสตมป์กี่ดวง?',
   '["50 ดวง", "87 ดวง", "124 ดวง", "174 ดวง"]'::jsonb,
   '124 ดวง',
   'รวมแสตมป์: 112 + 37 = 149 ดวง หักที่ให้น้อง: 149 - 25 = 124 ดวง'),
  
  -- Question 7
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'fractions', 'การบวกและลบเศษส่วน', 'math',
   'มีรูปวงกลมแบ่ง 8 ส่วน ระบายสี: ต้น 4/8, เจเจ 3/8, บอล 1/8, ก้อง 5/8 (ต้น + เจเจ) ต่างกับ (บอล + ก้อง) อยู่เท่าใด?',
   '["7/8", "6/8", "2/8", "1/8"]'::jsonb,
   '1/8',
   'ต้น + เจเจ = 4/8 + 3/8 = 7/8, บอล + ก้อง = 1/8 + 5/8 = 6/8, ผลต่าง = 7/8 - 6/8 = 1/8'),
  
  -- Question 8
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'hard', 'fractions', 'โจทย์ปัญหาเศษส่วน', 'math',
   'บอสมีที่ดิน 12/12 ไร่ (1 ไร่) ปลูกกล้วย 7/12 ไร่ ปลูกข้าวโพดน้อยกว่ากล้วย 3/12 ไร่ ที่เหลือปลูกทานตะวัน ปลูกทานตะวันกี่ไร่?',
   '["1/12 ไร่", "2/12 ไร่", "4/12 ไร่", "10/12 ไร่"]'::jsonb,
   '1/12 ไร่',
   'ข้าวโพด: 7/12 - 3/12 = 4/12 ไร่, รวมกล้วยและข้าวโพด: 7/12 + 4/12 = 11/12 ไร่, ทานตะวัน: 12/12 - 11/12 = 1/12 ไร่'),
  
  -- Question 9
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'fractions', 'โจทย์ปัญหาเศษส่วน', 'math',
   'มีน้ำผลไม้ 4 แก้ว แบ่ง 12 ส่วนเท่ากัน แก้ว 1: น้ำองุ่น 4/12 + น้ำมะม่วง 5/12, แก้ว 2: น้ำส้ม 7/12 + น้ำฝรั่ง 3/12 น้ำผลไม้ในแก้วที่ 1 ต่างจากแก้วที่ 2 อยู่เท่าใด?',
   '["1/12", "2/12", "9/12", "10/12"]'::jsonb,
   '1/12',
   'แก้วที่ 1: 4/12 + 5/12 = 9/12, แก้วที่ 2: 7/12 + 3/12 = 10/12, ผลต่าง: 10/12 - 9/12 = 1/12'),
  
  -- Question 10
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'fractions', 'โจทย์ปัญหาเศษส่วน', 'math',
   'เค้ก 1 ก้อนแบ่ง 12 ส่วน ขายให้: เจน 3/12, โต้ง 2/12, โบว์ 4/12 เหลือเค้กเท่าใด?',
   '["9/12", "7/12", "5/12", "3/12"]'::jsonb,
   '3/12',
   'รวมส่วนที่ขายไป: 3/12 + 2/12 + 4/12 = 9/12, ส่วนที่เหลือ: 12/12 - 9/12 = 3/12'),
  
  -- Question 11
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'patterns', 'แบบรูปของจำนวน', 'math',
   'เงินออมรายวัน: อา 26, จ 39, อ 52, พ ?, พฤ ?, ศ ? เงินออมวันพุธกับวันศุกร์ต่างกันเท่าใด?',
   '["13 บาท", "26 บาท", "65 บาท", "91 บาท"]'::jsonb,
   '26 บาท',
   'แบบรูปเพิ่มทีละ 13 (39-26=13) พุธ: 52+13=65, ศุกร์: 65+13+13=91, ผลต่าง: 91-65=26 บาท'),
  
  -- Question 12
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'patterns', 'แบบรูปและความสัมพันธ์', 'math',
   'รูปที่ 1 มี 4 ชิ้น, รูปที่ 2 มี 7 ชิ้น, รูปที่ 3 มี 10 ชิ้น รูปที่ 5 จะมีกี่ชิ้น?',
   '["13", "16", "19", "21"]'::jsonb,
   '16',
   'แบบรูปเพิ่มทีละ 3 รูปที่ 4: 10+3=13, รูปที่ 5: 13+3=16'),
  
  -- Question 13
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'money', 'โจทย์ปัญหาเกี่ยวกับเงิน', 'math',
   'ฟ้ามีเงิน 50 บาท 2 ใบ ซื้อนม 3 ขวด ขวดละ 26.50 บาท ฟ้าเหลือเงินเท่าใด?',
   '["20.50 บาท", "23.50 บาท", "73.50 บาท", "79.50 บาท"]'::jsonb,
   '20.50 บาท',
   'เงินทั้งหมด: 50×2=100 บาท, ราคานม: 3×26.50=79.50 บาท, เงินทอน: 100-79.50=20.50 บาท'),
  
  -- Question 14
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'time', 'โจทย์ปัญหาเวลา', 'math',
   'แก้มทานข้าวเสร็จ 8.10 น. พัก 20 นาที แล้วเรียนออนไลน์: คณิต 40 นาที, อังกฤษ 1 ชั่วโมง, ไทย 40 นาที เลิกเรียนกี่โมง?',
   '["8.10 น.", "9.10 น.", "10.30 น.", "10.50 น."]'::jsonb,
   '10.50 น.',
   'เริ่มเรียน 8.30 น. → จบคณิต 9.10 น. → จบอังกฤษ 10.10 น. → จบไทย 10.50 น.'),
  
  -- Question 15
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'time', 'เวลา', 'math',
   'ตารางทำการบ้าน: กานดา 17.45-18.50, ยุพา 17.30-18.40, สมชาย 17.40-18.30, สุพร 17.50-19.00 ใครใช้เวลาเท่ากัน?',
   '["ยุพา, สุพร", "สมชาย, สุพร", "กานดา, ยุพา", "สมชาย, กานดา"]'::jsonb,
   'ยุพา, สุพร',
   'กานดา: 65 นาที, ยุพา: 70 นาที, สมชาย: 50 นาที, สุพร: 70 นาที ยุพาและสุพรใช้เวลาเท่ากัน'),
  
  -- Question 16
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'time', 'โจทย์ปัญหาเวลา', 'math',
   'ตารางเรียนสุดา: คณิต 08.05-09.05, ประวัติ 09.05-09.50, พัก 09.50-10.00, ไทย 10.00-10.50, อังกฤษ 10.50-11.30 เรียนอังกฤษกี่นาที?',
   '["40", "45", "50", "60"]'::jsonb,
   '40',
   'จาก 10.50 ถึง 11.30 = 40 นาที (10.50→11.00 = 10 นาที + 11.00→11.30 = 30 นาที)'),
  
  -- Question 17
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'hard', 'measurement', 'โจทย์ปัญหาความยาว', 'math',
   'กล่องขนม 5 กล่องสูงรวม 42 ซม. 5 มม. นำออกไป 2 กล่อง เหลือ 3 กล่อง ความสูงที่เหลือเท่าใด?',
   '["8 ซม. 5 มม.", "17 ซม.", "25 ซม. 5 มม.", "34 ซม."]'::jsonb,
   '25 ซม. 5 มม.',
   'ความสูง 1 กล่อง: 425มม. ÷ 5 = 85มม., ความสูง 3 กล่อง: 85 × 3 = 255มม. = 25 ซม. 5 มม.'),
  
  -- Question 18
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'hard', 'measurement', 'โจทย์ปัญหาความยาว', 'math',
   'ระยะทางร้านค้า 30 กม. ปาล์มขับ 15 กม. 600 ม. ทอมขับ 10 กม. 900 ม. เหลือระยะทางอีกเท่าใด?',
   '["3 กม. 500 ม.", "4 กม. 700 ม.", "14 กม. 400 ม.", "19 กม. 100 ม."]'::jsonb,
   '3 กม. 500 ม.',
   'รวมระยะที่ขับ: (15 กม. 600ม.) + (10 กม. 900ม.) = 26 กม. 500ม., เหลือ: 30 - 26.5 = 3 กม. 500ม.'),
  
  -- Question 19
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'measurement', 'การวัดความยาว', 'math',
   'ดินสอยาว 18 ซม. 5 มม. ยางลบสั้นกว่าดินสอ 15 ซม. 3 มม. ถ้านำมาวางต่อกัน ยาวเท่าใด?',
   '["3 ซม. 2 มม.", "15 ซม. 3 มม.", "21 ซม. 7 มม.", "33 ซม. 8 มม."]'::jsonb,
   '21 ซม. 7 มม.',
   'ยางลบ: (18ซม. 5มม.) - (15ซม. 3มม.) = 3ซม. 2มม., วางต่อกัน: (18ซม. 5มม.) + (3ซม. 2มม.) = 21ซม. 7มม.'),
  
  -- Question 20
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'weighing', 'โจทย์ปัญหาน้ำหนัก', 'math',
   'ผักกาดขาว 26 กก. 500 ก. กะหล่ำปลีหนักกว่าผักกาดขาว 9 กก. 700 ก. รวมน้ำหนักทั้งสองอย่างเท่าใด?',
   '["16 กก. 800 ก.", "26 กก. 500 ก.", "36 กก. 200 ก.", "62 กก. 700 ก."]'::jsonb,
   '62 กก. 700 ก.',
   'กะหล่ำปลี: 26.5 + 9.7 = 36 กก. 200ก., รวม: 26.5 + 36.2 = 62 กก. 700ก.'),
  
  -- Question 21
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'hard', 'weighing', 'โจทย์ปัญหาน้ำหนัก', 'math',
   'รวม 3 ครั้ง = 42 กก. ครั้งที่ 1: 15 กก. 600 ก. ครั้งที่ 3: น้อยกว่าครั้งที่ 1 อยู่ 2,700 ก. ครั้งที่ 2 ยกได้เท่าไร?',
   '["28 กก. 500 ก.", "26 กก. 400 ก.", "13 กก. 500 ก.", "12 กก. 900 ก."]'::jsonb,
   '13 กก. 500 ก.',
   'ครั้งที่ 3: 15.6 - 2.7 = 12.9 กก., รวมครั้ง 1+3: 15.6 + 12.9 = 28.5 กก., ครั้งที่ 2: 42 - 28.5 = 13.5 กก.'),
  
  -- Question 22
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'volume', 'โจทย์ปัญหาปริมาตร', 'math',
   'น้ำส้ม 3 ลิตร, น้ำกระเจี๊ยบ 1 ลิตร 700 มล., น้ำลำไย 600 มล. (น้ำกระเจี๊ยบ + น้ำลำไย) เทียบกับ น้ำส้ม เป็นอย่างไร?',
   '["น้อยกว่า 2 ลิตร 300 มล.", "มากกว่า 2 ลิตร 300 มล.", "น้อยกว่า 700 มล.", "มากกว่า 700 มล."]'::jsonb,
   'น้อยกว่า 700 มล.',
   'รวมกระเจี๊ยบ+ลำไย: 1.7 + 0.6 = 2.3 ลิตร, เปรียบเทียบกับน้ำส้ม: 3 - 2.3 = 0.7 ลิตร (น้อยกว่า 700 มล.)'),
  
  -- Question 23
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'volume', 'โจทย์ปัญหาปริมาตร', 'math',
   'น้ำผลไม้ 6 ขวด ขวดละ 450 มล. เทใส่เหยือก 3 ใบ เต็มพอดี เหยือก 1 ใบจุเท่าไร?',
   '["450 มล.", "900 มล.", "1 ลิตร 350 มล.", "2 ลิตร 700 มล."]'::jsonb,
   '900 มล.',
   'ปริมาตรรวม: 6 × 450 = 2,700 มล., ความจุต่อเหยือก: 2,700 ÷ 3 = 900 มล.'),
  
  -- Question 24
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'pictograph', 'แผนภูมิรูปภาพ', 'math',
   'แผนภูมิหนังสือที่ยืม (1 รูป = 10 เล่ม) รวมยืม 20 รูป = 200 เล่ม ห้องสมุดมีหนังสือ 250 เล่ม เหลือหนังสือที่ไม่ถูกยืมเท่าใด?',
   '["20", "50", "200", "230"]'::jsonb,
   '50',
   'หนังสือที่ถูกยืม: 200 เล่ม, หนังสือที่เหลือ: 250 - 200 = 50 เล่ม'),
  
  -- Question 25
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'pictograph', 'แผนภูมิรูปภาพ', 'math',
   'แผนภูมิสัตว์ (1 รูป = 5 ตัว) วัว 4 รูป, แพะ 6 รูป, ไก่ 8 รูป, ม้า 2 รูป, หมู 2 รูป รวม 22 รูป = 110 ตัว ซื้อม้าเพิ่ม 10 ตัว รวมมีสัตว์กี่ตัว?',
   '["12", "32", "110", "120"]'::jsonb,
   '120',
   'สัตว์เดิม: 110 ตัว, รวมใหม่: 110 + 10 = 120 ตัว'),
  
  -- Question 26
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'dataPresentaton', 'ตารางทางเดียว', 'math',
   'ข้าวกล้อง 500 ถุง×1กก.=500กก., ข้าวเสาไห้ 100 ถุง×5กก.=500กก., ข้าวหอมมะลิ 30 ถุง×15กก.=450กก., ข้าวขาวนาปี 20 ถุง×25กก.=500กก. ชนิดใดมีน้ำหนักรวมต่างจากพวก?',
   '["ข้าวกล้อง", "ข้าวเสาไห้", "ข้าวหอมมะลิ", "ข้าวขาวนาปี"]'::jsonb,
   'ข้าวหอมมะลิ',
   'ข้าวหอมมะลิหนักรวม 450 กก. ในขณะที่ชนิดอื่นหนัก 500 กก.'),
  
  -- Question 27 (Short Answer)
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'mixedOperations', 'โจทย์ปัญหาการคูณ ลบ', 'math',
   'ออมเงินวันละ 95 บาท 30 วัน ซื้อนาฬิกา 2,000 บาท เหลือเงินเท่าไร?',
   '[]'::jsonb,
   '850',
   'เงินออม: 30 × 95 = 2,850 บาท, เหลือเงิน: 2,850 - 2,000 = 850 บาท'),
  
  -- Question 28 (Short Answer)
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'money', 'โจทย์ปัญหาการเงิน', 'math',
   'เงินที่มี: 1000×2=2000, 500×2=1000, 100×4=400, 10×7=70 รวม=3,470 บาท ฝากธนาคาร 1,650 บาท เหลือเท่าไร?',
   '[]'::jsonb,
   '1820',
   'เงินที่เหลือ: 3,470 - 1,650 = 1,820 บาท'),
  
  -- Question 29 (Short Answer)
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'weighing', 'โจทย์ปัญหาน้ำหนัก', 'math',
   'ม้า 8 ตัว กินอาหารวันละ 5,000 กรัม (5 กก.) ต่อตัว เลี้ยง 3 วัน ใช้อาหารกี่กิโลกรัม?',
   '[]'::jsonb,
   '120',
   'อาหารต่อวัน: 8 × 5 = 40 กก., อาหาร 3 วัน: 40 × 3 = 120 กก.'),
  
  -- Question 30 (Show Work)
  (v_admin_id, true, ARRAY['ข้อสอบ NT 2565'], 3, NULL, 'nt',
   'medium', 'mixedOperations', 'โจทย์ปัญหาการบวกและคูณ', 'math',
   'ขายฝรั่งวันแรก 29 กก. วันที่สอง 33 กก. ราคากิโลกรัมละ 40 บาท ได้เงินทั้งหมดกี่บาท?',
   '[]'::jsonb,
   '2480',
   'วิธีทำ: รวมสองวันขายฝรั่งได้ 29 + 33 = 62 กก., ฝรั่งราคากิโลกรัมละ 40 บาท, รวมสองวันแม่ค้าขายฝรั่งได้เงิน 62 × 40 = 2,480 บาท');

END $$;