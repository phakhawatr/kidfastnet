

# ปรับปรุงโจทย์ Mixed Math ไม่ให้ซ้ำประธานและกริยา

## ปัญหาปัจจุบัน
- โจทย์ 2 ตัวดำเนินการ (2-op) มีแค่ **1 แม่แบบต่อ 1 เครื่องหมาย** เช่น บวก = "มี...ซื้อมาเพิ่ม" ทุกข้อ, ลบ = "มีเงิน...ซื้อของไป" ทุกข้อ
- ทำให้ประธานและกริยาซ้ำกันทุกข้อตามที่เห็นในภาพ

## แนวทางแก้ไข

สร้างไฟล์ข้อมูลโจทย์ใหม่ `src/utils/mixedMathTemplates.ts` เก็บชุดโจทย์ที่ผู้ใช้ให้มา 90+ ข้อ แล้วปรับ `MixedMathPracticeApp.tsx` ให้สุ่มจากชุดข้อมูลนี้

### 1. สร้างไฟล์ `src/utils/mixedMathTemplates.ts`

เก็บโจทย์แบ่งตามหมวด:
- **อาชีพ** (พนักงานไปรษณีย์, ชาวประมง, เชฟ, วิศวกร, ช่างตัดผม ฯลฯ)
- **สัตว์/นิทาน** (กระรอก, แม่ไก่, ผึ้ง, มังกร, นางเงือก ฯลฯ)
- **โรงเรียน** (คุณครู, ภารโรง, นักเรียน, ลูกเสือ ฯลฯ)
- **ครอบครัว** (คุณยาย, คุณปู่, น้องบี, พี่เอก ฯลฯ)
- **อาหาร/ร้านค้า** (คนทำขนมปัง, บาริสต้า, แม่บ้าน ฯลฯ)
- **ท่องเที่ยว/ยานพาหนะ** (ไกด์, กัปตัน, คนขับแท็กซี่ ฯลฯ)
- **เกษตรกร** (ชาวนา, ชาวสวนทุเรียน, คนปลูกผัก ฯลฯ)

แต่ละโจทย์จะเก็บเป็น template function ที่รับตัวเลขเข้าไปแล้วสร้างโจทย์พร้อม answer, symbolic, hint

### 2. ปรับ `src/pages/MixedMathPracticeApp.tsx`

- **`generate2OpStory`**: แทนที่แม่แบบเดิมที่ hardcode ด้วยการสุ่มจาก template pool โดยกรองตาม operation ที่เลือก
- **`generate3OpStory`**: เพิ่ม template จากชุดข้อมูลที่ผู้ใช้ให้มาสำหรับโจทย์ 3 ขั้นตอน
- **ป้องกันซ้ำ**: ใช้ Set เก็บ index ของ template ที่ใช้แล้ว ไม่ให้สุ่มซ้ำภายในชุดเดียวกัน

### รายละเอียดทางเทคนิค

| ไฟล์ | การเปลี่ยนแปลง |
|------|----------------|
| `src/utils/mixedMathTemplates.ts` | ไฟล์ใหม่ -- เก็บ 90+ template functions แบ่งตามหมวดหมู่และ operation type (+, -, mixed) |
| `src/pages/MixedMathPracticeApp.tsx` | ปรับ `generate2OpStory` และ `generate3OpStory` ให้สุ่มจาก template pool แทน hardcode + เพิ่มระบบ tracking ไม่ให้สุ่มซ้ำในชุดเดียวกัน |

### โครงสร้าง Template

แต่ละ template จะเป็น function ที่รับตัวเลขตาม digit config แล้วคืนค่า:
- `question`: ข้อความโจทย์ภาษาไทย
- `answer`: คำตอบ (number)
- `symbolic`: สมการ เช่น "500 - 120 - 150 = ?"
- `symbolicAlt`: สมการรูปแบบอื่น (ถ้ามี)
- `hint`: คำใบ้
- `ops`: เครื่องหมายที่ใช้ เช่น ['+', '-']

